(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[970],{5392:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j,runtime:()=>p});var i=s(5155),l=s(2115),n=s(5695),r=s(2056),a=s(7869),d=s(760),c=s(5710),o=s(364),h=s(8023),x=s(8932);function m(e){let{plan:t,id:s}=e,m=(0,n.useRouter)(),[p,j]=(0,l.useState)(t),[w]=(0,l.useState)(new Date),[f,g]=(0,l.useState)(null),{setDirection:v}=(0,h.c)(),N=(e,t)=>{t.offset.x<-80&&30>Math.abs(t.offset.y)?g(e):g(null)},y=e=>{(0,r.VD)(p.id,e),j({...p,schedules:p.schedules.filter(t=>t.id!==e)}),g(null)},b=e=>{null===f&&(v("forward"),m.push("/plan/".concat(s,"/schedule/").concat(e)))},{currentAndFuture:k,past:C}=(e=>{let t=new Date(p.date),s=[],i=[];return e.forEach(e=>{let l=new Date(t),[n,r]=e.endTime.split(":").map(Number);l.setHours(n,r,0,0),l<w?i.push(e):s.push(e)}),s.sort((e,t)=>{let[s,i]=e.startTime.split(":").map(Number),[l,n]=t.startTime.split(":").map(Number);return 60*s+i-(60*l+n)}),i.sort((e,t)=>{let[s,i]=e.startTime.split(":").map(Number),[l,n]=t.startTime.split(":").map(Number);return 60*s+i-(60*l+n)}),{currentAndFuture:s,past:i}})(p.schedules);return(0,i.jsxs)(c.m,{className:"py-6 pb-24",children:[(0,i.jsxs)(x.Z,{className:"mb-6",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("button",{onClick:()=>{v("backward"),m.push("/")},className:"mr-4 p-2 rounded-full hover:bg-accent/10 transition-colors","aria-label":"戻る",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,i.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-[#67A599]",children:p.title})]})}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,o.Yq)(p.date,"yyyy年MM月dd日 EEEE")," ",(0,o.OQ)()]})]}),(0,i.jsx)(a.P.div,{className:"mb-5 text-center text-sm text-muted-foreground",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:(0,i.jsxs)("div",{className:"bg-secondary/40 py-2 px-4 rounded-full inline-flex items-center",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:(0,i.jsx)("path",{d:"M14 9l-6 6 6 6"})}),(0,i.jsx)("p",{children:"左にスワイプして削除"})]})}),(0,i.jsx)("div",{className:"space-y-6 mb-20",children:0===k.length&&0===C.length?(0,i.jsx)(x.Z,{className:"text-center py-12",children:(0,i.jsx)("p",{className:"text-muted-foreground",children:"予定がまだありません"})}):(0,i.jsxs)(i.Fragment,{children:[k.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-medium mb-3 text-[#67A599]",children:"予定"}),(0,i.jsx)(d.N,{children:(0,i.jsx)("div",{className:"space-y-3",children:k.map(e=>(0,i.jsx)(u,{schedule:e,isPast:!1,onDelete:y,onSwipe:N,isActiveSwipe:f===e.id,onNavigate:b,planDate:p.date},e.id))})})]}),C.length>0&&(0,i.jsxs)("div",{className:"mt-8",children:[(0,i.jsx)("h2",{className:"text-xl font-medium mb-3 text-[#C17C74]",children:"過去の予定"}),(0,i.jsx)(d.N,{children:(0,i.jsx)("div",{className:"space-y-3",children:C.map(e=>(0,i.jsx)(u,{schedule:e,isPast:!0,onDelete:y,onSwipe:N,isActiveSwipe:f===e.id,onNavigate:b,planDate:p.date},e.id))})})]})]})}),(0,i.jsx)(a.P.div,{className:"fixed bottom-6 right-6 z-50",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,type:"spring"},children:(0,i.jsx)(a.P.button,{onClick:()=>{v("forward"),m.push("/plan/".concat(s,"/schedule/create"))},className:"bg-[#67A599] text-white w-14 h-14 rounded-full flex items-center justify-center shadow-lg border-none",whileHover:{scale:1.05,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.95},"aria-label":"予定を追加",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,i.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})})]})}function u(e){let{schedule:t,isPast:s,onDelete:l,onSwipe:n,isActiveSwipe:r,onNavigate:d,planDate:c}=e,h={bg:s?"bg-secondary/70":"bg-[#67A599]",text:"text-white"};return(0,i.jsxs)(x.Z,{className:"relative overflow-hidden rounded-2xl",children:[(0,i.jsx)(a.P.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:.1,onDragEnd:(e,s)=>n(t.id,s),className:"relative",layout:!0,children:(0,i.jsxs)("div",{onClick:()=>d(t.id),className:"w-full p-4 ".concat(h.bg," ").concat(h.text," rounded-2xl border-none transition-all text-left cursor-pointer shadow-md hover:shadow-lg"),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium",children:t.title}),(0,i.jsxs)("p",{className:"text-sm opacity-90 mt-1 font-medium",children:[(0,o.Yq)(c,"yyyy年MM月dd日")," ",t.startTime," - ",t.endTime]}),t.memo&&(0,i.jsx)("p",{className:"text-sm opacity-80 mt-2",children:t.memo})]}),(0,i.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"opacity-90",children:(0,i.jsx)("path",{d:"M9 18l6-6-6-6"})})})]})}),(0,i.jsx)(a.P.div,{className:"absolute top-0 right-0 h-full flex items-center",initial:{opacity:0,width:0},animate:{opacity:+!!r,width:80*!!r},transition:{duration:.2},children:(0,i.jsxs)("button",{onClick:()=>l(t.id),className:"h-full w-full bg-[#C17C74] flex items-center justify-center text-white rounded-r-2xl",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,i.jsx)("path",{d:"M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})}),(0,i.jsx)("span",{className:"ml-1",children:"削除"})]})})]})}let p="edge";function j(e){let{params:t}=e,s=t.id,a=(0,n.useRouter)(),[d,c]=(0,l.useState)(null),[o,h]=(0,l.useState)(!0),[x,u]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{u(!0);let e=(0,r.OB)(s);e?c(e):a.push("/"),h(!1)},[s,a]),x)?o?(0,i.jsx)("div",{children:"読み込み中..."}):d?(0,i.jsx)(m,{plan:d,id:s}):(0,i.jsx)("div",{children:"プランが見つかりませんでした"}):(0,i.jsx)("div",{className:"py-6 flex justify-center",children:"読み込み中..."})}},9597:(e,t,s)=>{Promise.resolve().then(s.bind(s,5392))}},e=>{var t=t=>e(e.s=t);e.O(0,[343,48,441,317,358],()=>t(9597)),_N_E=e.O()}]);