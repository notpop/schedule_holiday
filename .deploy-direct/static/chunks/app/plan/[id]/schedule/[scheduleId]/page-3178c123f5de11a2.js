(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{364:(e,t,r)=>{"use strict";r.d(t,{$C:()=>d,Gx:()=>f,Jm:()=>u,KZ:()=>x,OE:()=>m,OQ:()=>c,Yq:()=>o,nb:()=>h});var s=r(5512),n=r(9161),a=r(6399),i=r(7716),l=r(8885);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy年MM月dd日",r=new Date(e);return(0,s.GP)(r,t,{locale:l.ja})},d=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),u=()=>(0,s.GP)(new Date,"yyyy-MM-dd"),c=()=>(0,s.GP)(new Date,"HH:mm"),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=[];for(let r=0;r<24;r++)for(let s=0;s<60;s+=e){let e=r.toString().padStart(2,"0"),n=s.toString().padStart(2,"0");t.push("".concat(e,":").concat(n))}return t},h=e=>{let t=new Date;t.setHours(0,0,0,0);let r=new Date(e);return r.setHours(0,0,0,0),(0,n.Y)(r,t)},f=e=>{let t=new Date(e);return(0,a.c)(t)},x=e=>{let t=new Date;t.setHours(0,0,0,0);let r=new Date(e);return r.setHours(0,0,0,0),(0,i.d)(r,t)}},2020:(e,t,r)=>{Promise.resolve().then(r.bind(r,4951))},2056:(e,t,r)=>{"use strict";r.d(t,{Fs:()=>m,Ng:()=>c,OB:()=>o,Td:()=>u,VD:()=>h,r4:()=>i,rq:()=>d});let s="holiday-plans",n=()=>void 0!==window.localStorage,a={getItem:e=>{try{if(!n())return null;return localStorage.getItem(e)}catch(e){return null}},setItem:(e,t)=>{try{if(!n())return;localStorage.setItem(e,t)}catch(e){}}},i=()=>{if(!n())return[];let e=a.getItem(s);return e?JSON.parse(e):[]},l=e=>{n()&&a.setItem(s,JSON.stringify(e))},o=e=>n()&&i().find(t=>t.id===e)||null,d=e=>{if(!n())return;let t=i();t.push(e),l(t)},u=e=>{n()&&l(i().filter(t=>t.id!==e))},c=(e,t)=>{if(!n())return;let r=i(),s=r.findIndex(t=>t.id===e);-1!==s&&(r[s].schedules.push(t),l(r))},m=(e,t)=>{if(!n())return;let r=i(),s=r.findIndex(t=>t.id===e);if(-1!==s){let e=r[s].schedules.findIndex(e=>e.id===t.id);-1!==e&&(r[s].schedules[e]=t,l(r))}},h=(e,t)=>{if(!n())return;let r=i(),s=r.findIndex(t=>t.id===e);-1!==s&&(r[s].schedules=r[s].schedules.filter(e=>e.id!==t),l(r))}},4951:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f,runtime:()=>h});var s=r(5155),n=r(2115),a=r(5695),i=r(2056),l=r(7869),o=r(5710),d=r(364),u=r(8023),c=r(8932);function m(e){let{planId:t,schedule:r}=e,m=(0,a.useRouter)(),[h,f]=(0,n.useState)(r.title),[x,g]=(0,n.useState)(r.startTime),[p,b]=(0,n.useState)(r.endTime),[v,y]=(0,n.useState)(r.memo),[j,N]=(0,n.useState)(!1),{setDirection:w}=(0,u.c)(),S=(0,d.OE)(10);return(0,s.jsxs)(o.m,{className:"py-6",children:[(0,s.jsxs)(c.Z,{className:"mb-6 flex items-center",children:[(0,s.jsx)("button",{onClick:()=>{w("backward"),m.back()},className:"mr-4 p-2 rounded-full hover:bg-accent/10 transition-colors","aria-label":"戻る",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),(0,s.jsx)("h1",{className:"text-2xl font-bold flex-1 text-[#67A599]",children:"予定を編集"})]}),(0,s.jsx)(c.Z,{delay:.1,className:"space-y-6",children:(0,s.jsx)("form",{onSubmit:e=>{if(e.preventDefault(),!h.trim())return void alert("タイトルを入力してください");let[s,n]=x.split(":").map(Number),[a,l]=p.split(":").map(Number);if(60*s+n>=60*a+l)return void alert("終了時間は開始時間より後に設定してください");N(!0);let o={...r,title:h.trim(),startTime:x,endTime:p,memo:v.trim()};(0,i.Fs)(t,o),setTimeout(()=>{m.push("/plan/".concat(t))},300)},children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-muted-foreground",children:"タイトル"}),(0,s.jsx)("input",{id:"title",type:"text",value:h,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-border bg-background focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"startTime",className:"block text-sm font-medium text-muted-foreground",children:"開始時間"}),(0,s.jsx)("select",{id:"startTime",value:x,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-border bg-background focus:outline-none focus:ring-2 focus:ring-primary",children:S.map(e=>(0,s.jsx)("option",{value:e,children:e},"start-".concat(e)))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"endTime",className:"block text-sm font-medium text-muted-foreground",children:"終了時間"}),(0,s.jsx)("select",{id:"endTime",value:p,onChange:e=>b(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-border bg-background focus:outline-none focus:ring-2 focus:ring-primary",children:S.map(e=>(0,s.jsx)("option",{value:e,children:e},"end-".concat(e)))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"memo",className:"block text-sm font-medium text-muted-foreground",children:"メモ（任意）"}),(0,s.jsx)("textarea",{id:"memo",value:v,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 h-32 rounded-lg border border-border bg-background focus:outline-none focus:ring-2 focus:ring-primary resize-none"})]}),(0,s.jsx)(l.P.button,{type:"submit",className:"w-full py-3 bg-[#67A599] text-white rounded-xl font-medium shadow-md hover:bg-[#67A599]/90",whileTap:{scale:.98},disabled:j,children:j?"更新中...":"予定を更新"})]})})})]})}let h="edge";function f(e){let{params:t}=e,{id:r,scheduleId:l}=t,o=(0,a.useRouter)(),[d,u]=(0,n.useState)(null),[c,h]=(0,n.useState)(!0),[f,x]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{x(!0);let e=(0,i.OB)(r);if(e){let t=e.schedules.find(e=>e.id===l);t?u(t):o.push("/plan/".concat(r))}else o.push("/");h(!1)},[r,l,o]),f)?c?(0,s.jsx)("div",{children:"読み込み中..."}):d?(0,s.jsx)(m,{planId:r,schedule:d}):(0,s.jsx)("div",{children:"スケジュールが見つかりませんでした"}):(0,s.jsx)("div",{className:"py-6 flex justify-center",children:"読み込み中..."})}},5710:(e,t,r)=>{"use strict";r.d(t,{m:()=>n});var s=r(5155);r(2115);let n=e=>{let{children:t,className:r=""}=e;return(0,s.jsx)("div",{className:"max-w-md mx-auto px-4 h-full ".concat(r),children:t})}},8023:(e,t,r)=>{"use strict";r.d(t,{NavigationProvider:()=>i,c:()=>l});var s=r(5155),n=r(2115);let a=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,n.useState)("forward");return(0,s.jsx)(a.Provider,{value:{direction:r,setDirection:i},children:t})}function l(){let e=(0,n.useContext)(a);if(void 0===e)throw Error("useNavigation must be used within a NavigationProvider");return e}},8932:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(5155),n=r(7869),a=r(8023);function i(e){let{children:t,className:r="",delay:i=0}=e,{direction:l}=(0,a.c)();return(0,s.jsx)(n.P.div,{initial:"initial",animate:"animate",exit:"exit",variants:{initial:{opacity:0,x:"forward"===l?100:-100},animate:{opacity:1,x:0,transition:{duration:.4,ease:"easeOut",delay:i}},exit:{opacity:0,x:"forward"===l?-100:100,transition:{duration:.4,ease:"easeIn"}}},className:r,children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[343,441,317,358],()=>t(2020)),_N_E=e.O()}]);